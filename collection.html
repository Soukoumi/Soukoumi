<!DOCTYPE html>
 <html lang="fr">
 <head>
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <title>Ma Collection</title>
     <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@300;500;700&display=swap" rel="stylesheet">
     <style>
         :root {
             --primary: #ff4655;
             --secondary: #0fb6d6;
             --accent: #bd3944;
             --dark: #0f1923;
             --light: #ffffff;
             --violet: #b892ff;
             --neon-violet: #b892ff;
             --neon-pink: #ff69b4;
             --apex-red: #DA292E;
             --apex-gold: #F0A500;
         }
 
         body {
             font-family: 'Rajdhani', sans-serif;
             background: linear-gradient(135deg, #0f1923 0%, #1a1a2e 50%, #2d1b36 100%);
             min-height: 100vh;
             color: var(--light);
             margin: 0;
             padding: 20px;
         }
 
         .back-button {
             position: fixed;
             top: 20px;
             left: 20px;
             padding: 12px 25px;
             font-size: 16px;
             background: linear-gradient(135deg, var(--neon-violet), var(--neon-pink));
             color: var(--light);
             border: none;
             border-radius: 50px;
             cursor: pointer;
             text-decoration: none;
             transition: all 0.3s ease;
             box-shadow: 0 5px 15px rgba(184, 146, 255, 0.3);
             font-family: 'Rajdhani', sans-serif;
             font-weight: 500;
             text-transform: uppercase;
             letter-spacing: 0.1em;
             z-index: 100;
         }
 
         .back-button:hover {
             transform: translateX(-5px);
             box-shadow: 0 7px 20px rgba(184, 146, 255, 0.5);
         }
 
         h1 {
             text-align: center;
             font-size: 3em;
             margin: 20px 0;
             color: var(--light);
             animation: neon 1.5s ease-in-out infinite alternate;
         }
 
         @keyframes neon {
             from {
                 text-shadow: 
                     0 0 7px #fff,
                     0 0 10px #fff,
                     0 0 21px #fff,
                     0 0 42px var(--neon-violet),
                     0 0 82px var(--neon-violet),
                     0 0 92px var(--neon-pink),
                     0 0 102px var(--neon-pink),
                     0 0 151px var(--neon-violet);
             }
             to {
                 text-shadow: 
                     0 0 5px #fff,
                     0 0 8px #fff,
                     0 0 15px #fff,
                     0 0 30px var(--neon-violet),
                     0 0 60px var(--neon-violet),
                     0 0 70px var(--neon-pink),
                     0 0 80px var(--neon-pink),
                     0 0 120px var(--neon-violet);
             }
         }
 
         .controls {
             display: flex;
             justify-content: center;
             gap: 15px;
             margin: 20px;
             flex-wrap: wrap;
         }
 
         .sort-button, .filter-button {
             padding: 10px 20px;
             font-size: 16px;
             background: rgba(255, 255, 255, 0.1);
             color: var(--light);
             border: 2px solid var(--neon-violet);
             border-radius: 50px;
             cursor: pointer;
             transition: all 0.3s ease;
             font-family: 'Rajdhani', sans-serif;
         }
 
         .sort-button:hover, .filter-button:hover, 
         .sort-button.active, .filter-button.active {
             background: rgba(184, 146, 255, 0.2);
             box-shadow: 0 0 20px var(--neon-violet);
         }
 
         .rarity-filters {
             display: none;
             position: absolute;
             top: 100%;
             left: 50%;
             transform: translateX(-50%);
             background: rgba(15, 25, 35, 0.95);
             padding: 10px;
             border-radius: 15px;
             border: 2px solid var(--neon-violet);
             z-index: 10;
             margin-top: 10px;
             flex-direction: column;
             gap: 5px;
         }
 
         .rarity-button {
             position: relative;
         }
 
         .card.locked {
             opacity: 0.7;
             position: relative;
         }
 
         .card.locked::after {
             content: 'üîí';
             position: absolute;
             top: 50%;
             left: 50%;
             transform: translate(-50%, -50%);
             font-size: 40px;
             text-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
         }
 
         .card.locked img {
             filter: grayscale(100%) brightness(50%);
         }
 
         .sort-controls {
             display: flex;
             justify-content: center;
             gap: 15px;
             margin-bottom: 20px;
         }
 
         .collection-container {
             display: grid;
             grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
             gap: 30px;
             padding: 20px;
             max-width: 1400px;
             margin: 0 auto;
         }
 
         .card {
             background: rgba(15, 25, 35, 0.9);
             border: 3px solid var(--neon-violet);
             border-radius: 15px;
             padding: 20px;
             display: flex;
             flex-direction: column;
             align-items: center;
             transition: all 0.3s ease;
             cursor: pointer;
             position: relative;
             aspect-ratio: 2.5/3.5;
             min-height: 350px;
         }
 
         .card:hover {
             transform: translateY(-5px);
             box-shadow: 0 10px 20px rgba(184, 146, 255, 0.3);
         }
 
         .card img {
             width: 180px;
             height: 180px;
             object-fit: contain;
             margin-bottom: 15px;
         }
 
         .card-info {
             text-align: center;
             width: 100%;
             padding: 10px;
             background: rgba(0, 0, 0, 0.2);
             border-radius: 10px;
         }
 
         .card-name {
             font-size: 1.4em;
             font-weight: bold;
             margin: 8px 0;
         }
 
         .card-rarity {
             font-size: 1.1em;
             margin: 8px 0;
         }
 
         .card-type {
             font-size: 1.1em;
             margin: 5px 0;
             color: var(--light);
         }
 
         .card-count {
             position: absolute;
             top: 10px;
             right: 10px;
             background: rgba(0, 0, 0, 0.8);
             color: var(--light);
             padding: 5px 10px;
             border-radius: 15px;
             font-size: 0.9em;
         }
 
         .commune { border-color: #28a745; }
         .rare { border-color: var(--secondary); }
         .epique { border-color: var(--violet); }
         .l√©gendaire { border-color: var(--apex-gold); }
         .sp√©cial { border-color: var(--primary); }
         .arc-en-ciel {
             border-image: linear-gradient(
                 45deg,
                 var(--primary),
                 var(--secondary),
                 var(--violet),
                 var(--neon-pink),
                 var(--apex-gold)
             ) 1;
             animation: rainbow-border 3s linear infinite;
         }
 
         @keyframes rainbow-border {
             0% { filter: hue-rotate(0deg); }
             100% { filter: hue-rotate(360deg); }
         }
 
         #modal {
             display: none;
             position: fixed;
             top: 0;
             left: 0;
             width: 100%;
             height: 100%;
             background: rgba(0, 0, 0, 0.9);
             justify-content: center;
             align-items: center;
             z-index: 1000;
         }
 
         .modal-content {
             background: rgba(15, 25, 35, 0.95);
             padding: 20px;
             border-radius: 15px;
             border: 2px solid var(--neon-violet);
             max-width: 90%;
             max-height: 90%;
             position: relative;
             display: flex;
             justify-content: center;
             align-items: center;
             perspective: 1000px;
         }
 
         #modal-image {
             max-width: 600px;
             max-height: 80vh;
             transition: transform 0.1s ease;
             transform-style: preserve-3d;
             cursor: move;
             will-change: transform;
             backface-visibility: hidden;
         }
 
         .modal-info {
             margin-top: 15px;
             text-align: center;
             background: rgba(0, 0, 0, 0.3);
             padding: 15px;
             border-radius: 10px;
             width: 100%;
         }
 
         .modal-close {
             position: absolute;
             top: -20px;
             right: -20px;
             width: 40px;
             height: 40px;
             background: var(--primary);
             color: white;
             border: none;
             border-radius: 50%;
             cursor: pointer;
             font-size: 20px;
         }
 
         .collection-stats {
             text-align: center;
             margin: 20px auto;
             padding: 20px;
             background: rgba(15, 25, 35, 0.95);
             border: 2px solid var(--neon-violet);
             border-radius: 15px;
             display: flex;
             gap: 20px;
             justify-content: center;
             box-shadow: 0 0 20px rgba(184, 146, 255, 0.2);
             backdrop-filter: blur(10px);
             max-width: 800px;
             width: 90%;
         }
 
         .stat-item {
             padding: 15px 25px;
             border-radius: 10px;
             background: rgba(255, 255, 255, 0.1);
             flex: 1;
             transition: all 0.3s ease;
         }
 
         .stat-item:hover {
             transform: translateY(-5px);
             box-shadow: 0 5px 15px rgba(184, 146, 255, 0.3);
         }
 
         .stat-label {
             font-size: 1.1em;
             color: var(--neon-violet);
             margin-bottom: 8px;
             text-transform: uppercase;
             letter-spacing: 1px;
         }
 
         .stat-value {
             font-size: 2em;
             font-weight: bold;
             color: var(--light);
             text-shadow: 0 0 10px var(--neon-violet);
         }
 
         .stat-description {
             font-size: 0.9em;
             color: var(--light);
         }
     </style>
 </head>
 <body>
     <a href="index.html" class="back-button">Retour</a>
     <h1>Ma Collection</h1>
 
     <div class="collection-stats">
         <div class="stat-item">
             <div class="stat-label">Total des cartes</div>
             <div class="stat-value" id="total-cards">0</div>
             <div class="stat-description">Avec doublons</div>
         </div>
         <div class="stat-item">
             <div class="stat-label">Cartes uniques</div>
             <div class="stat-value" id="unique-cards">0</div>
             <div class="stat-description">Sans doublons</div>
         </div>
         <div class="stat-item">
             <div class="stat-label">Collection totale</div>
             <div class="stat-value" id="total-available">29</div>
             <div class="stat-description">Cartes √† collectionner</div>
         </div>
     </div>
 
     <div class="sort-controls">
         <button class="sort-button active" onclick="sortCards('default')">Par d√©faut</button>
         <button class="sort-button" onclick="sortCards('count')">Par nombre</button>
         <div class="rarity-button">
             <button class="sort-button" onclick="toggleRarityFilters()">Par raret√©</button>
             <div class="rarity-filters" id="rarity-filters">
                 <button class="filter-button" onclick="filterCards('commune')">Communes</button>
                 <button class="filter-button" onclick="filterCards('rare')">Rares</button>
                 <button class="filter-button" onclick="filterCards('epique')">√âpiques</button>
                 <button class="filter-button" onclick="filterCards('l√©gendaire')">L√©gendaires</button>
                 <button class="filter-button" onclick="filterCards('sp√©cial')">Sp√©ciales</button>
                 <button class="filter-button" onclick="filterCards('arc-en-ciel')">Arc-en-ciel</button>
             </div>
         </div>
     </div>
 
     <div class="collection-container" id="collection"></div>
 
     <div id="modal">
         <div class="modal-content">
             <button class="modal-close" onclick="closeModal()">√ó</button>
             <img id="modal-image" src="" alt="Card Image" style="max-width: 100%; max-height: 70vh;">
             <div id="modal-info" style="margin-top: 15px; text-align: center;"></div>
         </div>
     </div>
 
     <script>
         const allCards = [
             { name: "Radolf le magicien", rarity: "L√©gendaire", "type": "Mage", weight: 2, image: "1.png" },
             { name: "Pryzma", rarity: "L√©gendaire", "type": "Mage", weight: 2, image: "2.png" },      
             { name: "Hoshi", rarity: "Rare", "type": "Mage", weight: 35, image: "3.png" },
             { name: "Erika", rarity: "Epique", "type": "√âp√©e", weight: 12, image: "Erika.png" },
             { name: "Kax-un", rarity: "Rare", "type": "√âp√©e", weight: 35, image: "5.png" }, 
             { name: "Azelys", rarity: "Epique", "type": "√âp√©e", weight: 12, image: "6.png" },
             { name: "Niky", rarity: "Epique", "type": "Gun", weight: 12, image: "7.png" },
             { name: "H√Æun", rarity: "Commune", "type": "Gun", weight: 60, image: "8.png" },
             { name: "Orikku", rarity: "Rare", "type": "Gun", weight: 35, image: "9.png" }, 
             { name: "Brang", rarity: "Commune", "type": "Robot", weight: 60, image: "10.png" }, 
             { name: "Somara", rarity: "Epique", "type": "Robot", weight: 12, image: "11.png" },
             { name: "Inazu", rarity: "Rare", "type": "Robot", weight: 35, image: "12.png" },
             { name: "Zomeji", rarity: "Rare", "type": "Objets", weight: 12, image: "13.png" },
             { name: "Seikea ", rarity: "Rare", "type": "Objets", weight: 35, image: "14.png" },      
             { name: "Neru", rarity: "Epique", "type": "Objets", weight: 12, image: "15.png" },
         ];
 
         function loadCollection() {
             const collection = JSON.parse(localStorage.getItem('collection')) || [];
             const container = document.getElementById('collection');
             container.innerHTML = '';
 
             // Calcul des statistiques
             let totalCards = 0;
             collection.forEach(card => {
                 totalCards += card.count || 0;
             });
 
             const uniqueCards = collection.length;
             const totalAvailable = allCards.length;
 
             document.getElementById('total-cards').textContent = totalCards;
             document.getElementById('unique-cards').textContent = uniqueCards;
             document.getElementById('total-available').textContent = totalAvailable;
 
             // Afficher toutes les cartes
             allCards.forEach(card => {
                 const ownedCard = collection.find(c => 
                     c.name === card.name && 
                     c.rarity === card.rarity && 
                     c.type === card.type
                 );
 
                 const cardElement = document.createElement('div');
                 cardElement.className = `card ${card.rarity.toLowerCase()} ${!ownedCard ? 'locked' : ''}`;
                 cardElement.innerHTML = `
                     ${ownedCard ? `<div class="card-count">√ó${ownedCard.count}</div>` : ''}
                     <img src="${card.image}" alt="${card.name}">
                     <div class="card-info">
                         <div class="card-name">${card.name}</div>
                         <div class="card-rarity" style="color: var(--${card.rarity.toLowerCase()})">${card.rarity}</div>
                         <div class="card-type">${card.type}</div>
                     </div>
                 `;
 
                 if (ownedCard) {
                     cardElement.onclick = () => showModal(ownedCard);
                 }
                 container.appendChild(cardElement);
             });
         }
 
         function sortCards(method) {
             const buttons = document.querySelectorAll('.sort-button');
             buttons.forEach(button => {
                 button.classList.remove('active');
                 if(button.textContent.toLowerCase().includes(method)) {
                     button.classList.add('active');
                 }
             });
 
             const container = document.getElementById('collection');
             const cards = Array.from(container.children);
 
             switch(method) {
                 case 'count':
                     cards.sort((a, b) => {
                         const countA = parseInt(a.querySelector('.card-count')?.textContent.replace('√ó', '') || '0');
                         const countB = parseInt(b.querySelector('.card-count')?.textContent.replace('√ó', '') || '0');
                         return countB - countA;
                     });
                     break;
                 case 'default':
                     loadCollection();
                     return;
             }
 
             container.innerHTML = '';
             cards.forEach(card => container.appendChild(card));
         }
 
         function toggleRarityFilters() {
             const filters = document.getElementById('rarity-filters');
             filters.style.display = filters.style.display === 'flex' ? 'none' : 'flex';
         }
 
         function filterCards(rarity) {
             const cards = document.querySelectorAll('.card');
             const filters = document.getElementById('rarity-filters');
 
             cards.forEach(card => {
                 if(card.classList.contains(rarity.toLowerCase())) {
                     card.style.display = 'flex';
                 } else {
                     card.style.display = 'none';
                 }
             });
 
             filters.style.display = 'none';
         }
 
         // Fermer les filtres de raret√© en cliquant ailleurs
         document.addEventListener('click', (event) => {
             const filters = document.getElementById('rarity-filters');
             const rarityButton = event.target.closest('.rarity-button');
 
             if (!rarityButton && filters.style.display === 'flex') {
                 filters.style.display = 'none';
             }
         });
 
         function showModal(card) {
             const modal = document.getElementById('modal');
             const modalImage = document.getElementById('modal-image');

             // Trouver la carte correspondante dans allCards
             const cardData = allCards.find(c => 
                 c.name === card.name && 
                 c.rarity === card.rarity && 
                 c.type === card.type
             );

             if (cardData) {
                 modalImage.src = `images/${cardData.image}`;
                 modal.style.display = 'flex';

                 // Variables pour l'effet 3D
                 let isDragging = false;
                 let startX, startY;
                 let currentX = 0;
                 let currentY = 0;
                 let currentRotateX = 0;
                 let currentRotateY = 0;

                 // Fonction pour mettre √† jour la transformation
                 function updateTransform() {
                     modalImage.style.transform = `
                         translate3d(${currentX}px, ${currentY}px, 0)
                         rotateX(${currentRotateX}deg)
                         rotateY(${currentRotateY}deg)
                     `;
                 }

                 // Gestionnaire d'√©v√©nements pour le d√©but du glissement
                 modalImage.addEventListener('mousedown', (e) => {
                     isDragging = true;
                     startX = e.clientX - currentX;
                     startY = e.clientY - currentY;
                 });

                 // Gestionnaire d'√©v√©nements pour le mouvement
                 document.addEventListener('mousemove', (e) => {
                     if (!isDragging) return;

                     currentX = e.clientX - startX;
                     currentY = e.clientY - startY;

                     const rect = modalImage.getBoundingClientRect();
                     const centerX = rect.left + rect.width / 2;
                     const centerY = rect.top + rect.height / 2;
                     
                     currentRotateY = ((e.clientX - centerX) / centerX) * 30;
                     currentRotateX = ((centerY - e.clientY) / centerY) * 30;

                     updateTransform();
                 });

                 // Gestionnaire d'√©v√©nements pour la fin du glissement
                 document.addEventListener('mouseup', () => {
                     isDragging = false;
                 });

                 // R√©initialiser la position et la rotation
                 currentX = 0;
                 currentY = 0;
                 currentRotateX = 0;
                 currentRotateY = 0;
                 updateTransform();
             }
         }
 
         function closeModal() {
             const modal = document.getElementById('modal');
             const modalImage = document.getElementById('modal-image');
             modalImage.style.transform = 'none';
             modal.style.display = 'none';
         }
 
         // Fermer le modal en cliquant en dehors
         window.onclick = function(event) {
             const modal = document.getElementById('modal');
             if (event.target === modal) {
                 modal.style.display = 'none';
             }
         }
 
         // Charger la collection au d√©marrage
         document.addEventListener('DOMContentLoaded', loadCollection);
     </script>
 </body>
 </html>
